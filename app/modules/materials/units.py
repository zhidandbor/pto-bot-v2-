from __future__ import annotations

_UNIT_MAP: dict[str, str] = {
    "м": "м", "метр": "м", "метров": "м", "метра": "м", "m": "м",
    "шт": "шт.", "штука": "шт.", "штуки": "шт.", "штук": "шт.", "шт.": "шт.", "pcs": "шт.",
    "кг": "кг", "килограмм": "кг", "кг.": "кг", "kg": "кг",
    "т": "т", "тонна": "т", "тонн": "т", "тонны": "т", "tn": "т",
    "компл": "компл.", "комплект": "компл.", "компл.": "компл.",
    "м2": "м²", "м²": "м²", "м^2": "м²", "кв.м": "м²", "кв.м.": "м²", "m2": "м²",
    "м3": "м³", "м³": "м³", "м^3": "м³", "куб.м": "м³", "куб.м.": "м³", "m3": "м³",
    "п.м": "п.м", "пм": "п.м", "п/м": "п.м", "м.п.": "п.м", "м.п": "п.м",
    "рул": "рул.", "рулон": "рул.", "рул.": "рул.",
    "л": "л", "литр": "л", "литров": "л",
    "уп": "уп.", "упак": "уп.", "упаковка": "уп.", "уп.": "уп.",
    "мп": "п.м",
}


def normalize_unit(raw: str) -> str:
    """Normalize unit string to canonical form."""
    cleaned = raw.strip().lower()
    return _UNIT_MAP.get(cleaned, raw.strip())
